<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü–æ–¥–∞—Ä–æ–∫ üíò</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1a0b2e;
      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.7);
      --accent: #ff4da6;
      --accent2:#7c4dff;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      overflow:hidden;
      background:
        radial-gradient(1200px 600px at 20% 20%, rgba(255,77,166,.25), transparent 60%),
        radial-gradient(1000px 700px at 80% 30%, rgba(124,77,255,.22), transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
    }

    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      position:relative;
    }

    .card{
      width:min(520px, 100%);
      background: linear-gradient(180deg, var(--card), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding:22px;
      backdrop-filter: blur(10px);
      position:relative;
      /* –í–ê–ñ–ù–û: –ø—É—Å—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–µ —Ä–µ–∂–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π) */
      overflow: visible;
    }
    .card::before{
      content:"";
      position:absolute; inset:-120px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 55%);
      transform: rotate(10deg);
      pointer-events:none;
    }

    h1{
      margin:0 0 8px 0;
      font-size:26px;
      letter-spacing:.2px;
      position:relative;
      z-index:1;
    }
    p{
      margin:0 0 18px 0;
      color:var(--muted);
      line-height:1.45;
      position:relative;
      z-index:1;
    }

    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      position:relative;
      z-index:2;
    }

    button{
      border:0;
      cursor:pointer;
      font-weight:700;
      padding:12px 16px;
      border-radius: 14px;
      transition: transform .12s ease, filter .12s ease, background .12s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .btn-yes{
      background: linear-gradient(135deg, var(--accent), #ff7ac8);
      color:#1b0820;
      flex:1 1 160px;
    }
    .btn-yes:hover{ filter:brightness(1.05); transform: translateY(-1px); }

    /* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –ù–ï–¢ */
    .btn-no-float{
      background: rgba(255,255,255,.10);
      color:var(--text);
      border:1px solid rgba(255,255,255,.18);
      position:fixed;
      left: 20px;
      top: 20px;
      z-index: 999999;
      min-width: 160px;
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
      backdrop-filter: blur(8px);
      display:none; /* –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–µ—Ä–≤–æ–º —ç–∫—Ä–∞–Ω–µ */
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:12px;
      position:relative;
      z-index:2;
      margin-top:6px;
    }
    .gift{
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.16);
      border-radius: 18px;
      padding:14px 12px;
      text-align:left;
      min-height:86px;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .gift:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    .emoji{ font-size:32px; width:42px; text-align:center; }
    .gtitle{ font-size:14px; margin:0; color:var(--text); }
    .gsub{ font-size:12px; margin:2px 0 0 0; color:var(--muted); font-weight:600; }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      position:relative;
      z-index:2;
      margin-bottom:10px;
    }
    .back{
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.16);
      color:var(--text);
      padding:10px 12px;
      border-radius: 14px;
      font-weight:800;
      min-width:48px;
    }

    .hidden{ display:none !important; }

    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:50;
    }
    .modal{
      width:min(720px, 100%);
      background: linear-gradient(180deg, var(--card2), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.18);
      border-radius: 22px;
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .modal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.14);
    }
    .modal-title{
      margin:0;
      font-size:15px;
      letter-spacing:.2px;
    }
    .close{
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.18);
      color:var(--text);
      padding:8px 10px;
      border-radius: 12px;
      font-weight:900;
    }
    .modal-body{ padding:16px; }
    .photos{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:10px;
    }
    .photos img{
      width:100%;
      height:180px;
      object-fit:cover;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
    }
    .letter{
      white-space:pre-wrap;
      line-height:1.55;
      color:var(--text);
      font-weight:650;
    }
    audio{ width:100%; margin-top:8px; }

    .hearts{
      position:absolute; inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }
    .heart{
      position:absolute;
      opacity:.22;
      font-size:18px;
      animation: floatUp 10s linear infinite;
      filter: blur(.2px);
    }
    @keyframes floatUp{
      from{ transform: translateY(120vh) translateX(0); }
      to{ transform: translateY(-20vh) translateX(40px); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="hearts" id="hearts"></div>

    <!-- –≠–∫—Ä–∞–Ω 1 -->
    <div class="card" id="screen1">
      <h1 id="title">–ü—Ä–∏–≤–µ—Ç üíñ</h1>
      <p>–•–æ—á–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π –ø–æ–¥–∞—Ä–æ–∫ –Ω–∞ 14 —Ñ–µ–≤—Ä–∞–ª—è?</p>

      <!-- –¢—É—Ç —Ç–æ–ª—å–∫–æ –î–ê -->
      <div class="row">
        <button class="btn-yes" id="yesBtn">–î–ê</button>
      </div>

      <p style="margin-top:14px; font-size:12px; color:rgba(255,255,255,.55)">
        –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∫–Ω–æ–ø–∫–∞ ¬´–ù–µ—Ç¬ª —Å–µ–≥–æ–¥–Ω—è –∂–∏–≤—ë—Ç —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é üòÑ
      </p>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 2 -->
    <div class="card hidden" id="screen2">
      <div class="topbar">
        <div>
          <h1 style="margin:0 0 4px 0;">–¢–≤–æ–∏ –ø–æ–¥–∞—Ä–∫–∏ üéÅ</h1>
          <p style="margin:0;">–ù–∞–∂–º–∏ –Ω–∞ –ª—é–±–æ–π.</p>
        </div>
        <button class="back" id="backToStart">‚Ü©Ô∏é</button>
      </div>

      <div class="grid">
        <button class="gift" data-gift="flowers">
          <div class="emoji">üå∏</div>
          <div>
            <p class="gtitle">–¶–≤–µ—Ç—ã</p>
            <p class="gsub">—Ç–≤–æ–∏ –ª—é–±–∏–º—ã–µ</p>
          </div>
        </button>

        <button class="gift" data-gift="memories">
          <div class="emoji">üì∏</div>
          <div>
            <p class="gtitle">–ù–∞—à–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è</p>
            <p class="gsub">2‚Äì3 —Ñ–æ—Ç–æ</p>
          </div>
        </button>

        <button class="gift" data-gift="letter">
          <div class="emoji">üíå</div>
          <div>
            <p class="gtitle">–ü–∏—Å—å–º–æ</p>
            <p class="gsub">–∫–∞–∫ —è —Ç–µ–±—è –ª—é–±–ª—é</p>
          </div>
        </button>

        <button class="gift" data-gift="music">
          <div class="emoji">üéµ</div>
          <div>
            <p class="gtitle">–ú—É–∑—ã–∫–∞</p>
            <p class="gsub">–∫–æ—Ç–æ—Ä–∞—è –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ —Ç–µ–±–µ</p>
          </div>
        </button>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ -->
    <div class="overlay hidden" id="overlay">
      <div class="modal">
        <div class="modal-head">
          <h3 class="modal-title" id="modalTitle">–ü–æ–¥–∞—Ä–æ–∫</h3>
          <button class="close" id="closeModal">‚úï</button>
        </div>
        <div class="modal-body" id="modalBody"></div>
      </div>
    </div>
  </div>

  <!-- –ü–õ–ê–í–ê–Æ–©–ò–ô –ù–ï–¢ (–≤–Ω–µ –∫–∞—Ä—Ç–æ—á–∫–∏!) -->
  <button class="btn-no-float" id="noFloat">–ù–ï–¢</button>

<script>
  // ====== –∏–º—è –∏–∑ ?name= ======
  const params = new URLSearchParams(location.search);
  const name = params.get("name");
  const title = document.getElementById("title");
  if (name && name.trim()) title.textContent = `–ü—Ä–∏–≤–µ—Ç, ${name.trim()} üíñ`;

  // ====== —Å–µ—Ä–¥–µ—á–∫–∏ ======
  const hearts = document.getElementById("hearts");
  const heartEmojis = ["üíó","üíñ","üíò","üíï","üíû"];
  for (let i=0;i<18;i++){
    const s = document.createElement("div");
    s.className = "heart";
    s.textContent = heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
    s.style.left = Math.random()*100 + "vw";
    s.style.animationDuration = (7 + Math.random()*7) + "s";
    s.style.fontSize = (14 + Math.random()*18) + "px";
    s.style.animationDelay = (-Math.random()*10) + "s";
    hearts.appendChild(s);
  }

  // ====== —ç–∫—Ä–∞–Ω—ã ======
  const screen1 = document.getElementById("screen1");
  const screen2 = document.getElementById("screen2");
  const yesBtn = document.getElementById("yesBtn");
  const backToStart = document.getElementById("backToStart");

  // –ø–ª–∞–≤–∞—é—â–∏–π –ù–ï–¢
  const noFloat = document.getElementById("noFloat");
  noFloat.style.display = "block";

  yesBtn.addEventListener("click", () => {
    screen1.classList.add("hidden");
    screen2.classList.remove("hidden");
    noFloat.style.display = "none"; // –Ω–∞ –º–µ–Ω—é –ø–æ–¥–∞—Ä–∫–æ–≤ –ù–ï–¢ –Ω–µ –Ω—É–∂–µ–Ω
  });

  backToStart.addEventListener("click", () => {
    screen2.classList.add("hidden");
    screen1.classList.remove("hidden");
    noFloat.style.display = "block";
    spawnNo(); // —á—Ç–æ–± —Å—Ä–∞–∑—É –ø–æ—è–≤–∏–ª—Å—è –≤ –Ω–æ—Ä–º –º–µ—Å—Ç–µ
  });

  // ====== –ù–ï–¢ —Å–ø–∞–≤–Ω–∏—Ç—Å—è –ø–æ –∫—Ä–∞—è–º –∏ –Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç ======
  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  function spawnNo(){
    const pad = 12;
    const w = noFloat.offsetWidth || 160;
    const h = noFloat.offsetHeight || 44;

    const maxX = window.innerWidth - w - pad;
    const maxY = window.innerHeight - h - pad;

    // –∑–æ–Ω—ã (—Ä–µ–∞–ª—å–Ω–æ —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É/—Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞)
    const zone = Math.floor(Math.random()*4);
    let x=pad, y=pad;

    if(zone===0){ // TOP
      x = pad + Math.random()*maxX;
      y = pad + Math.random()*90;
    } else if(zone===1){ // BOTTOM
      x = pad + Math.random()*maxX;
      y = maxY - Math.random()*90;
    } else if(zone===2){ // LEFT
      x = pad + Math.random()*90;
      y = pad + Math.random()*maxY;
    } else { // RIGHT
      x = maxX - Math.random()*90;
      y = pad + Math.random()*maxY;
    }

    x = clamp(x, pad, maxX);
    y = clamp(y, pad, maxY);

    noFloat.style.left = x + "px";
    noFloat.style.top  = y + "px";

    noFloat.animate(
      [{ transform: "scale(0.96)" }, { transform: "scale(1)" }],
      { duration: 140, easing: "ease-out" }
    );
  }

  // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è
  spawnNo();

  // —É–±–µ–≥–∞–µ—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–∂–∞—Ç—å
  noFloat.addEventListener("touchstart", (e)=>{
    e.preventDefault();
    e.stopPropagation();
    spawnNo();
  }, {passive:false});

  noFloat.addEventListener("click", (e)=>{
    e.preventDefault();
    e.stopPropagation();
    spawnNo();
  });

  // –µ—Å–ª–∏ —ç–∫—Ä–∞–Ω –ø–æ–≤–µ—Ä–Ω—É–ª–∏/–∏–∑–º–µ–Ω–∏–ª–∏ —Ä–∞–∑–º–µ—Ä ‚Äî –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å
  window.addEventListener("resize", ()=>{
    if(noFloat.style.display !== "none") spawnNo();
  });

  // ====== –º–æ–¥–∞–ª–∫–∞ ======
  const overlay = document.getElementById("overlay");
  const modalTitle = document.getElementById("modalTitle");
  const modalBody = document.getElementById("modalBody");
  const closeModal = document.getElementById("closeModal");

  function openModal(t, html){
    modalTitle.textContent = t;
    modalBody.innerHTML = html;
    overlay.classList.remove("hidden");
  }
  function hideModal(){
    overlay.classList.add("hidden");
    modalBody.innerHTML = "";
  }
  closeModal.addEventListener("click", hideModal);
  overlay.addEventListener("click", (e)=>{ if(e.target===overlay) hideModal(); });

  // ====== –∫–æ–Ω—Ç–µ–Ω—Ç ======
  const content = {
    flowers: {
      title: "–¶–≤–µ—Ç—ã üå∏",
      html: `
        <p style="margin-top:0;color:rgba(255,255,255,.75)">–¢–≤–æ–∏ –ª—é–±–∏–º—ã–µ —Ü–≤–µ—Ç—ã.</p>
        <div class="photos" style="grid-template-columns:1fr;">
          <img src="assets/flowers.jpg" alt="flowers">
        </div>
      `
    },
    memories: {
      title: "–ù–∞—à–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è üì∏",
      html: `
        <p style="margin-top:0;color:rgba(255,255,255,.75)">–ü–∞—Ä–∞ –º–æ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —è –ª—é–±–ª—é.</p>
        <div class="photos">
          <10a29ae3-e0e8-423e-9295-5de488dac1e1.jpg" alt="memory 1">
          <img src="assets/m2.jpg" alt="memory 2">
          <img src="assets/m3.jpg" alt="memory 3">
        </div>
      `
    },
    letter: {
      title: "–ü–∏—Å—å–º–æ üíå",
      html: `
        <div class="letter">
–Ø –ª—é–±–ª—é —Ç–µ–±—è –∑–∞ —Ç–æ, —á—Ç–æ —Å —Ç–æ–±–æ–π –¥–∞–∂–µ –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º.
–¢—ã ‚Äî –º–æ–π —É—é—Ç, –º–æ–π —Å–º–µ—Ö –∏ –º–æ—è –º–æ—Ç–∏–≤–∞—Ü–∏—è.
–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å. üíñ

(—Ç—É—Ç –∑–∞–º–µ–Ω–∏ —Ç–µ–∫—Å—Ç –Ω–∞ —Å–≤–æ–π)
        </div>
      `
    },
    music: {
      title: "–ú—É–∑—ã–∫–∞ üéµ",
      html: `
        <p style="margin-top:0;color:rgba(255,255,255,.75)">
          –ù–∞–∂–º–∏ play ‚Äî –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ —Ç–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (iPhone –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫).
        </p>
        <audio controls>
          <source src="assets/song.mp3" type="audio/mpeg">
          –¢–≤–æ–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
        </audio>
      `
    }
  };

  document.querySelectorAll(".gift").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const key = btn.dataset.gift;
      openModal(content[key].title, content[key].html);
    });
  });
</script>
</body>
</html>
